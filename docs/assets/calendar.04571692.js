import{S as $,i as j,s as A,h as B,m as G,p as J,q as K,r as Q,w as W,x as R,z as U,b,c as C,d as h,a as T,f as u,l as N,g as v,H as P,t as F,n as I,o as L,e as X,u as Y}from"./index.ed0d3f73.js";import{I as Z}from"./IonPage.3ba1b6e7.js";import{c as x}from"./user.store.36050250.js";import{x as ee}from"./index.6903e97e.js";import{U as te,S as oe}from"./supabase.data.service.02f13fa6.js";import{g as ne}from"./index.a57b79e0.js";import"./BehaviorSubject.3a174332.js";import"./loadingMessage.1748f252.js";import"./overlays-ab6211c7.8f005edc.js";function q(o,e,n){const t=o.slice();return t[12]=e[n],t}function le(o){let e;return{c(){e=b("ion-item"),e.textContent="No days found"},m(n,t){T(n,e,t)},p:P,d(n){n&&v(e)}}}function ie(o){let e,n=o[1],t=[];for(let l=0;l<n.length;l+=1)t[l]=M(q(o,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=X()},m(l,a){for(let i=0;i<t.length;i+=1)t[i].m(l,a);T(l,e,a)},p(l,a){if(a&15){n=l[1];let i;for(i=0;i<n.length;i+=1){const _=q(l,n,i);t[i]?t[i].p(_,a):(t[i]=M(_),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=n.length}},d(l){Y(t,l),l&&v(e)}}}function ae(o){var t,l;let e=new Date(new Date((t=o[12])==null?void 0:t.date).getTime()+new Date((l=o[12])==null?void 0:l.date).getTimezoneOffset()*6e4).toDateString()+"",n;return{c(){n=F(e)},m(a,i){T(a,n,i)},p(a,i){var _,r;i&2&&e!==(e=new Date(new Date((_=a[12])==null?void 0:_.date).getTime()+new Date((r=a[12])==null?void 0:r.date).getTimezoneOffset()*6e4).toDateString()+"")&&L(n,e)},d(a){a&&v(n)}}}function se(o){let e;return{c(){e=F("Today")},m(n,t){T(n,e,t)},p:P,d(n){n&&v(e)}}}function H(o){var i,_;let e,n,t=((i=o[0])==null?void 0:i.daily_budget)-(((_=o[12])==null?void 0:_.food_total)||0).toFixed(2)+"",l,a;return{c(){e=b("b"),n=F("["),l=F(t),a=F("]\xA0\xA0")},m(r,d){T(r,e,d),u(e,n),u(e,l),u(e,a)},p(r,d){var g,p;d&3&&t!==(t=((g=r[0])==null?void 0:g.daily_budget)-(((p=r[12])==null?void 0:p.food_total)||0).toFixed(2)+"")&&L(l,t)},d(r){r&&v(e)}}}function M(o){var k,z;let e,n,t,l,a=o[2].getToday()===o[12].date&&((k=o[0])==null?void 0:k.daily_budget),i,_=(((z=o[12])==null?void 0:z.food_total)||0).toFixed(2)+"",r,d,g,p,w,S;function V(D,y){return y&2&&(n=null),n==null&&(n=D[2].getToday()===D[12].date),n?se:ae}let f=V(o,-1),m=f(o),s=a&&H(o);function c(){return o[7](o[12])}return{c(){e=b("ion-item"),m.c(),t=C(),l=b("ion-note"),s&&s.c(),i=C(),r=F(_),g=C(),h(l,"slot","end"),h(l,"class",d=I(o[2].getToday()===o[12].date?"today":"notToday")+" svelte-107flm"),h(e,"class",p=I(o[2].getToday()===o[12].date?"today":"notToday")+" svelte-107flm")},m(D,y){T(D,e,y),m.m(e,null),u(e,t),u(e,l),s&&s.m(l,null),u(l,i),u(l,r),u(e,g),w||(S=N(e,"click",c),w=!0)},p(D,y){var E,O;o=D,f===(f=V(o,y))&&m?m.p(o,y):(m.d(1),m=f(o),m&&(m.c(),m.m(e,t))),y&3&&(a=o[2].getToday()===o[12].date&&((E=o[0])==null?void 0:E.daily_budget)),a?s?s.p(o,y):(s=H(o),s.c(),s.m(l,i)):s&&(s.d(1),s=null),y&2&&_!==(_=(((O=o[12])==null?void 0:O.food_total)||0).toFixed(2)+"")&&L(r,_),y&2&&d!==(d=I(o[2].getToday()===o[12].date?"today":"notToday")+" svelte-107flm")&&h(l,"class",d),y&2&&p!==(p=I(o[2].getToday()===o[12].date?"today":"notToday")+" svelte-107flm")&&h(e,"class",p)},d(D){D&&v(e),m.d(),s&&s.d(),w=!1,S()}}}function _e(o){let e,n,t,l,a,i,_,r,d,g,p,w,S,V;function f(c,k){return c[1]&&c[1].length?ie:le}let m=f(o),s=m(o);return{c(){e=b("ion-header"),n=b("ion-toolbar"),t=b("ion-buttons"),t.innerHTML="<ion-menu-button></ion-menu-button>",l=C(),a=b("ion-title"),a.textContent="Calendar",i=C(),_=b("ion-buttons"),r=b("ion-button"),d=b("ion-icon"),g=C(),p=b("ion-content"),w=b("ion-list"),s.c(),h(t,"slot","start"),h(d,"slot","icon-only"),h(d,"icon",ee),h(_,"slot","end"),h(e,"translucent","true"),h(p,"class","ion-padding")},m(c,k){T(c,e,k),u(e,n),u(n,t),u(n,l),u(n,a),u(n,i),u(n,_),u(_,r),u(r,d),T(c,g,k),T(c,p,k),u(p,w),s.m(w,null),S||(V=N(r,"click",o[6]),S=!0)},p(c,k){m===(m=f(c))&&s?s.p(c,k):(s.d(1),s=m(c),s&&(s.c(),s.m(w,null)))},d(c){c&&v(e),c&&v(g),c&&v(p),s.d(),S=!1,V()}}}function re(o){let e,n;return e=new Z({props:{ionViewDidEnter:o[4],ionViewWillLeave:o[5],$$slots:{default:[_e]},$$scope:{ctx:o}}}),{c(){B(e.$$.fragment)},m(t,l){G(e,t,l),n=!0},p(t,[l]){const a={};l&32771&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function fe(o,e,n){let t,l;W(o,x,f=>n(9,t=f)),W(o,ne,f=>n(10,l=f));const a=te.getInstance(),i=oe.getInstance();let _={daily_budget:0,target_weight:0,water_target:8},r,d;R(async()=>{}),U(()=>{});const g=f=>{l("/day/[id]",{id:f})};return[_,r,a,g,async()=>{t!=null&&t.user_metadata?n(0,_=t==null?void 0:t.user_metadata):n(0,_={daily_budget:0,target_weight:0,water_target:8}),d||(d=await i.getDataSubscription("days").subscribe(f=>{f&&f.length>0&&n(1,r=f)}))},()=>{d&&d.unsubscribe(),n(1,r=[])},()=>g("new"),f=>g(f.id)]}class we extends ${constructor(e){super(),j(this,e,fe,re,A,{})}}export{we as default};
