import{S as J,i as K,s as Q,h as X,m as Y,p as Z,q as U,r as $,w as G,b as s,c as d,d as o,a as A,f as n,l as b,g as B,v as ee}from"./index.578304cd.js";import{I as te}from"./IonPage.3e881d26.js";import{B as ne}from"./index.f1a9933f.js";import{S as oe}from"./supabase.auth.service.b86c538c.js";import{g as ie}from"./index.766fcfcd.js";import{c as ae}from"./user.store.176ec192.js";import"./BehaviorSubject.a8d2a033.js";function le(a){let e,i,t,c,l,T,v,f,w,k,r,_,j,x,W,p,D,z,y,E,H,h,I,L,C,F,M,m,V,q,N;return{c(){var u,g,S;e=s("ion-header"),i=s("ion-toolbar"),t=s("ion-buttons"),t.innerHTML="<ion-menu-button></ion-menu-button>",c=d(),l=s("ion-title"),l.textContent="Settings",T=d(),v=s("ion-buttons"),f=s("ion-button"),w=s("ion-icon"),k=d(),r=s("ion-content"),_=s("ion-list"),j=s("ion-item"),x=s("ion-label"),x.textContent="Daily Budget",W=d(),p=s("ion-input"),z=d(),y=s("ion-item"),E=s("ion-label"),E.textContent="Water Target",H=d(),h=s("ion-input"),L=d(),C=s("ion-item"),F=s("ion-label"),F.textContent="Target Weight",M=d(),m=s("ion-input"),o(t,"slot","start"),o(w,"slot","icon-only"),o(w,"icon",ne),o(v,"slot","end"),o(e,"translucent","true"),o(x,"class","svelte-je3hji"),o(p,"type","number"),o(p,"class","short svelte-je3hji"),o(p,"value",D=(u=a[0])==null?void 0:u.daily_budget),o(E,"class","svelte-je3hji"),o(h,"type","number"),o(h,"class","short svelte-je3hji"),o(h,"value",I=(g=a[0])==null?void 0:g.water_target),o(F,"class","svelte-je3hji"),o(m,"type","number"),o(m,"class","short svelte-je3hji"),o(m,"value",V=(S=a[0])==null?void 0:S.target_weight),o(r,"class","ion-padding")},m(u,g){A(u,e,g),n(e,i),n(i,t),n(i,c),n(i,l),n(i,T),n(i,v),n(v,f),n(f,w),A(u,k,g),A(u,r,g),n(r,_),n(_,j),n(j,x),n(j,W),n(j,p),n(_,z),n(_,y),n(y,E),n(y,H),n(y,h),n(_,L),n(_,C),n(C,F),n(C,M),n(C,m),q||(N=[b(f,"click",a[2]),b(p,"ionFocus",O),b(p,"ionChange",a[3]),b(h,"ionFocus",O),b(h,"ionChange",a[4]),b(m,"ionFocus",O),b(m,"ionChange",a[5])],q=!0)},p(u,g){var S,P,R;g&1&&D!==(D=(S=u[0])==null?void 0:S.daily_budget)&&o(p,"value",D),g&1&&I!==(I=(P=u[0])==null?void 0:P.water_target)&&o(h,"value",I),g&1&&V!==(V=(R=u[0])==null?void 0:R.target_weight)&&o(m,"value",V)},d(u){u&&B(e),u&&B(k),u&&B(r),q=!1,ee(N)}}}function se(a){let e,i;return e=new te({props:{ionViewDidEnter:a[1],$$slots:{default:[le]},$$scope:{ctx:a}}}),{c(){X(e.$$.fragment)},m(t,c){Y(e,t,c),i=!0},p(t,[c]){const l={};c&2049&&(l.$$scope={dirty:c,ctx:t}),e.$set(l)},i(t){i||(Z(e.$$.fragment,t),i=!0)},o(t){U(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}function O(a){try{(parseFloat(a.target.value)||0)===0&&(a.target.value="")}catch(e){console.error("error clearing zero value",e)}a.target.getInputElement().then(e=>{console.log("input",e),e.type="text",e.setSelectionRange(e.value.length,e.value.length),e.type="number"})}function re(a,e,i){let t;G(a,ie,r=>i(6,r)),G(a,ae,r=>i(7,t=r));const c=oe.getInstance();let l={settings:{daily_budget:0,target_weight:0,water_target:8}};return[l,()=>{console.log("** ionViewDidEnter",t),t!=null&&t.user_metadata?i(0,l=t==null?void 0:t.user_metadata):i(0,l={daily_budget:0,target_weight:0,water_target:8})},async()=>{console.log("save settings as",l);const{user:r,error:_}=await c.saveSettings(l);_?console.log("save error",_):console.log("save results",r,_)},r=>i(0,l.daily_budget=r.detail.value,l),r=>i(0,l.water_target=r.detail.value,l),r=>i(0,l.target_weight=r.detail.value,l)]}class de extends J{constructor(e){super(),K(this,e,re,se,Q,{})}}export{de as default};
