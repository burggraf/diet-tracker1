import{S as H,i as L,s as j,e as p,a as D,b as y,d as v,f as r,l as B,n as z,h as S,B as E,y as G,D as J,t as F,A as O,z as I,x as K,w as P}from"./index.6e62adb1.js";import{x as Q}from"./index.8307df69.js";import{S as R}from"./supabase.data.service.69e37f59.js";import{g as U}from"./index.ec0a1740.js";import"./BehaviorSubject.76a1c7e4.js";import"./network.service.0bc8f042.js";import"./overlays-ab6211c7.d3cd924f.js";function N(e,t,n){const o=e.slice();return o[8]=t[n],o}function V(e){let t;return{c(){t=p("ion-item"),t.textContent="No days found"},m(n,o){v(n,t,o)},p:z,d(n){n&&S(t)}}}function W(e){let t,n=e[1],o=[];for(let l=0;l<n.length;l+=1)o[l]=A(N(e,n,l));return{c(){for(let l=0;l<o.length;l+=1)o[l].c();t=K()},m(l,s){for(let i=0;i<o.length;i+=1)o[i].m(l,s);v(l,t,s)},p(l,s){if(s&7){n=l[1];let i;for(i=0;i<n.length;i+=1){const a=N(l,n,i);o[i]?o[i].p(a,s):(o[i]=A(a),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(l){P(o,l),l&&S(t)}}}function q(e){var i;let t,n,o=e[0].daily_budget-(((i=e[8])==null?void 0:i.food_total)||0).toFixed(2)+"",l,s;return{c(){t=p("b"),n=F("["),l=F(o),s=F("]\xA0\xA0")},m(a,c){v(a,t,c),r(t,n),r(t,l),r(t,s)},p(a,c){var b;c&3&&o!==(o=a[0].daily_budget-(((b=a[8])==null?void 0:b.food_total)||0).toFixed(2)+"")&&I(l,o)},d(a){a&&S(t)}}}function A(e){var m;let t,n=e[8].date+"",o,l,s,i=w()===e[8].date&&e[0].daily_budget,a,c=(((m=e[8])==null?void 0:m.food_total)||0).toFixed(2)+"",b,h,_,g,k,C,f=i&&q(e);function T(){return e[4](e[8])}return{c(){t=p("ion-item"),o=F(n),l=D(),s=p("ion-note"),f&&f.c(),a=D(),b=F(c),_=D(),y(s,"slot","end"),y(s,"class",h=O(w()===e[8].date?"today":"notToday")+" svelte-107flm"),y(t,"class",g=O(w()===e[8].date?"today":"notToday")+" svelte-107flm")},m(d,u){v(d,t,u),r(t,o),r(t,l),r(t,s),f&&f.m(s,null),r(s,a),r(s,b),r(t,_),k||(C=B(t,"click",T),k=!0)},p(d,u){var M;e=d,u&2&&n!==(n=e[8].date+"")&&I(o,n),u&3&&(i=w()===e[8].date&&e[0].daily_budget),i?f?f.p(e,u):(f=q(e),f.c(),f.m(s,a)):f&&(f.d(1),f=null),u&2&&c!==(c=(((M=e[8])==null?void 0:M.food_total)||0).toFixed(2)+"")&&I(b,c),u&2&&h!==(h=O(w()===e[8].date?"today":"notToday")+" svelte-107flm")&&y(s,"class",h),u&2&&g!==(g=O(w()===e[8].date?"today":"notToday")+" svelte-107flm")&&y(t,"class",g)},d(d){d&&S(t),f&&f.d(),k=!1,C()}}}function X(e){let t,n,o,l,s,i,a,c,b,h,_,g,k,C;function f(d,u){return d[1]&&d[1].length?W:V}let T=f(e),m=T(e);return{c(){t=p("ion-header"),n=p("ion-toolbar"),o=p("ion-buttons"),o.innerHTML="<ion-menu-button></ion-menu-button>",l=D(),s=p("ion-title"),s.textContent="Calendar",i=D(),a=p("ion-buttons"),c=p("ion-button"),b=p("ion-icon"),h=D(),_=p("ion-content"),g=p("ion-list"),m.c(),y(o,"slot","start"),y(b,"slot","icon-only"),y(b,"icon",Q),y(a,"slot","end"),y(t,"translucent","true"),y(_,"class","ion-padding")},m(d,u){v(d,t,u),r(t,n),r(n,o),r(n,l),r(n,s),r(n,i),r(n,a),r(a,c),r(c,b),v(d,h,u),v(d,_,u),r(_,g),m.m(g,null),k||(C=B(c,"click",e[3]),k=!0)},p(d,[u]){T===(T=f(d))&&m?m.p(d,u):(m.d(1),m=T(d),m&&(m.c(),m.m(g,null)))},i:z,o:z,d(d){d&&S(t),d&&S(h),d&&S(_),m.d(),k=!1,C()}}}function w(){const e=new Date;return new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().split("T")[0]}function Y(e,t,n){let o;E(e,U,_=>n(5,o=_));const l=R.getInstance();let s={daily_budget:0,target_weight:0},i;const a=l.getDataSubscription("days").subscribe(_=>{n(1,i=_),console.log("*** days",i)});G(async()=>{const{data:_,error:g}=await l.getSettings();console.log("*** settings",_,g),n(0,s=_.settings||{})}),J(()=>{a.unsubscribe()});const c=_=>{o("/day/[id]",{id:_})};return[s,i,c,()=>c("new"),_=>c(_.id)]}class lt extends H{constructor(t){super(),L(this,t,Y,X,j,{})}}export{lt as default};
